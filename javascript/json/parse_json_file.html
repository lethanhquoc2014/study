<html>
    <head></head>
    <body>
        <header></header>
        <section></section>

        <script type="text/javascript">
            let requestUrl = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
            let request = new XMLHttpRequest();
            request.open('GET', requestUrl);
            request.responseType = 'json';
            request.send();

            request.onload = function() {
                const superHeroes = request.response;

                populateHeader(superHeroes);
                showHeroes(superHeroes);
            }

            populateHeader = function(obj) {
                let header = document.querySelector('header');

                const h1 = document.createElement('h1');
                h1.textContent = obj.squadName;
                header.appendChild(h1);

                const para = document.createElement('p');
                para.textContent = `Hometown: ${obj.homeTown} // Formed: ${obj.formed}`;
                header.appendChild(para);
            }

            showHeroes = function(obj) {
                let section = document.querySelector('section');

                const heroes = obj.members;
                for (let i = 0; i < heroes.length; i++) {
                    const article = document.createElement('article');
                    const h2 = document.createElement('h2');
                    const para1 = document.createElement('p');
                    const para2 = document.createElement('p');
                    const para3 = document.createElement('p');
                    const list = document.createElement('ul');

                    h2.textContent = heroes[i].name;
                    para1.textContent = `Secret identity: ${heroes[i].secretIdentity}`;
                    para2.textContent = `Age: ${heroes[i].age}`;
                    para3.textContent = 'Superpowers:';

                    const superPowers = heroes[i].powers;
                    for (let j = 0; j < superPowers.length; j++) {
                        const listItem = document.createElement('li');
                        listItem.textContent = superPowers[j];
                        list.appendChild(listItem);
                    }

                    article.appendChild(h2);
                    article.appendChild(para1);
                    article.appendChild(para2);
                    article.appendChild(para3);
                    article.appendChild(list);

                    section.appendChild(article);
                }
            }
        </script>
    </body>
</html>